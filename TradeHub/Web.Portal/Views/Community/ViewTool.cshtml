@model ToolViewModel
@{
    int counter = 0;
}
<div class="page-title" style="margin-top:6%;">
    <h2 style="color: white;">
        You are browsing the tool of:
    </h2>
    <h3 style="color:white;">
        @ViewData["userLogin"]
    </h3>
</div>

<div class="site-content subpage">

    @if (Model.UserId != CurrentUser.Id)
    {
        using (Html.BeginRouteForm(routeName: "",
                                 routeValues: new { },
                                 method: FormMethod.Get))
        {
            <button class="menu-button button bg-dark radius" style="width: 20%;" type="submit">View User Profile</button>
        }


        if (Model.Avaibility == Common.Enums.AvailabilityType.Available)
        {
            @* TODO *@
            <button>Offer to trade</button>
        }
        else
        {
            <p>The tool is currently unavailable for trade</p>
        }
    }

    <div>
        <h5>@Html.NameFor(m => m.Name)</h5>
        <h7>@Model.Name</h7>
    </div>
    <hr />
    <div>
        <h5>@Html.NameFor(m => m.Description)</h5>
        <h7>
            @if (!string.IsNullOrEmpty(Model.Description))
            {
                @Model.Description
            }
        </h7>
    </div>
    <hr />
    <div>
        <h5>@Html.NameFor(m => m.Quality)</h5>
        <h7>@Model.Quality</h7>
    </div>
    <hr />
    <div>
        <h5>@Html.NameFor(m => m.Avaibility)</h5>
        <h7>@Model.Avaibility</h7>
    </div>
    <hr />
    <div>
        <h5>@Html.NameFor(m => m.Visibility)</h5>
        <h7>@Model.Visibility</h7>
    </div>
    <hr />
    <div>
        <h5>Images:</h5>
        @* Tool Pictures *@
        <div class="row">
            @foreach (var image in Model.ToolPictures)
            {
                if (counter != 0 && counter % 3 == 0)
                {
                @:</div>
                @:<div class="row">
                }

                var base64 = Convert.ToBase64String(image.PictureData);
                var imgSrc = String.Format("data:image/gif;base64,{0}", base64);

                using (Html.BeginRouteForm(routeName: "GetUserToolImage",
                                              routeValues: new { toolId = Model.Id, toolImageId = image.Id },
                                              method: FormMethod.Get))
                {
                    <div class="col-md-4">
                        <input type="image" src="@imgSrc" alt="Submit" width="256" , height="256" />
                    </div>
                }
                counter++;
            }
        </div>
    </div>
</div>
