@model ToolViewModel

<div class="page-title" style="margin-top:6%;">
    <h2 style="color: white;">
        You are browsing the tool of:
    </h2>
    <h3 style="color:white;">
        @ViewData[ "userLogin" ]
    </h3>
</div>

<div class="site-content subpage">

    @if ( Model.UserId != CurrentUser.Id )
    {
        using ( Html.BeginRouteForm( routeName: "User",
                                 routeValues: new { userId = Model.UserId },
                                 method: FormMethod.Get ) )
        {
            <button type="submit">View User Profile</button>
        }


        if ( Model.Avaibility == Common.Enums.AvailabilityType.Available )
        {
            using ( Html.BeginRouteForm( routeName: "CreateOffert",
                                        routeValues: new { recievierUserId = Model.UserId, toolId = Model.Id },
                                        method: FormMethod.Get ) )
            {
                <button type="submit">Create trade offert</button>
            }
        }
        else
        {
            <p>The tool is currently unavailable for trade</p>
        }
    }

    <div>
        @Html.NameFor( m => m.Name )
        @Model.Name
    </div>

    <div>
        @Html.NameFor( m => m.Description )
        @if ( !string.IsNullOrEmpty( Model.Description ) )
        {
            @Model.Description
        }
    </div>

    <div>
        @Html.NameFor( m => m.Quality )
        @Model.Quality
    </div>

    <div>
        @Html.NameFor( m => m.Avaibility )
        @Model.Avaibility
    </div>

    <div>
        @Html.NameFor( m => m.Visibility )
        @Model.Visibility
    </div>

    <div>
        @* Tool Pictures *@
        @foreach ( var image in Model.ToolPictures )
        {
            var base64 = Convert.ToBase64String( image.PictureData );
            var imgSrc = String.Format( "data:image/gif;base64,{0}", base64 );

            using ( Html.BeginRouteForm( routeName: "GetUserToolImage",
                                            routeValues: new { toolId = Model.Id, toolImageId = image.Id },
                                            method: FormMethod.Get ) )
            {

                <input type="image" src="@imgSrc" alt="Submit" width="256" , height="256" />
            }

        }

    </div>
</div>
